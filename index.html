<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jonathan Bilewicz · Projects</title>
  <meta name="description" content="Shopify-inspired portfolio showcasing public GitHub projects by Jonathan Bilewicz (jonb4323)." />

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

  <style>
    :root {
      --bg: #f6f7fb;
      --card: #ffffff;
      --text: #0b1220;
      --muted: #697386;
      --brandA: #2D5BFF;         
      --brandA-600: #2248cc;
      --brandB: #FF6B35;         
      --brandB-600: #e25828;
      --ring: rgba(45,91,255,0.35);
      --border: #e6e8f0;
      --shadow: 0 10px 20px rgba(16,24,40,0.06), 0 2px 6px rgba(16,24,40,0.04);
      --radius: 16px;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b0d12;
        --card: #121622;
        --text: #eff2f9;
        --muted: #9aa6b2;
        --brandA: #2D5BFF;
        --brandA-600: #5d7dff;
        --brandB: #FF6B35;
        --brandB-600: #ff7f52;
        --ring: rgba(93,125,255,0.45);
        --border: #1e2430;
        --shadow: 0 12px 24px rgba(0,0,0,0.45), 0 2px 8px rgba(0,0,0,0.35);
      }
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .nav { position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(160%) blur(8px); background: color-mix(in srgb, var(--bg) 85%, transparent); border-bottom: 1px solid var(--border); }
    .nav-inner { max-width: 1120px; margin: 0 auto; padding: 14px 20px; display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px; }
    .brand { display: inline-flex; align-items: center; gap: 10px; font-weight: 800; letter-spacing: -0.02em; }
    .brand .logo { display: grid; place-items: center; width: 36px; height: 36px; border-radius: 10px; background: linear-gradient(135deg, var(--brandA), var(--brandB)); box-shadow: inset 0 0 0 2px rgba(255,255,255,0.25); }
    .brand .logo i { color: #0b1220; opacity: .85; }
    .nav-actions { justify-self: end; display: flex; align-items: center; gap: 10px; }
    .btn { appearance: none; border: 1px solid var(--border); background: var(--card); color: var(--text); padding: 10px 14px; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all .18s ease; box-shadow: var(--shadow); }
    .btn:hover { transform: translateY(-1px); }
    .btn-primary { background: linear-gradient(135deg, var(--brandA), var(--brandB)); border-color: transparent; color: #fff; }
    .btn-primary:hover { filter: brightness(1.05); }
    .icon-btn { border-radius: 12px; width: 40px; height: 40px; display: grid; place-items: center; background: var(--card); }

    .hero { max-width: 1120px; margin: 32px auto 0; padding: 24px 20px 8px; display: grid; grid-template-columns: 1fr auto; gap: 24px; align-items: center; }
    .hero h1 { font-size: clamp(28px, 3.4vw, 44px); margin: 4px 0 8px; letter-spacing: -0.02em; }
    .hero p { margin: 0; color: var(--muted); }
    .avatar { width: 96px; height: 96px; border-radius: 26px; overflow: hidden; border: 2px solid var(--border); box-shadow: var(--shadow); }
    .avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .meta { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 14px; }
    .pill { background: var(--card); border: 1px solid var(--border); padding: 8px 12px; border-radius: 999px; color: var(--muted); font-weight: 600; box-shadow: var(--shadow); }

    .controls { max-width: 1120px; margin: 18px auto 0; padding: 0 20px 8px; display: grid; grid-template-columns: 1fr auto; gap: 12px; }
    .search { position: relative; }
    .search input { width: 100%; padding: 12px 40px 12px 40px; border-radius: 12px; border: 1px solid var(--border); background: var(--card); color: var(--text); font-size: 15px; outline: none; transition: box-shadow .15s; box-shadow: var(--shadow); }
    .search input:focus { box-shadow: 0 0 0 4px var(--ring), var(--shadow); }
    .search i { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--muted); }
    .sort-select { padding: 12px 12px; border-radius: 12px; border: 1px solid var(--border); background: var(--card); color: var(--text); font-weight: 600; box-shadow: var(--shadow); }

    .grid { max-width: 1120px; margin: 14px auto 80px; padding: 0 20px; display: grid; grid-template-columns: repeat(1, minmax(0, 1fr)); gap: 16px; }
    @media (min-width: 640px){ .grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (min-width: 1024px){ .grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }

    .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; display: flex; flex-direction: column; }
    .card .thumb { height: 120px; background: linear-gradient(135deg, color-mix(in srgb, var(--brandA) 65%, transparent), color-mix(in srgb, var(--brandB) 45%, transparent)); border-bottom: 1px solid var(--border); }
    .card .body { padding: 14px; display: grid; gap: 10px; }
    .title-row { display: flex; align-items: start; justify-content: space-between; gap: 8px; }
    .title { font-weight: 700; line-height: 1.2; }
    .desc { color: var(--muted); font-size: 14px; min-height: 40px; }
    .tags { display: flex; gap: 8px; flex-wrap: wrap; }
    .tag { font-size: 12px; font-weight: 700; color: #fff; background: var(--brandA); padding: 4px 8px; border-radius: 999px; border: 1px solid rgba(0,0,0,0.06); }
    .meta-row { display: flex; justify-content: space-between; align-items: center; gap: 8px; color: var(--muted); font-weight: 600; font-size: 13px; }
    .actions { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
    .link-btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; border: 1px solid var(--border); background: var(--card); padding: 10px 12px; border-radius: 12px; font-weight: 700; text-decoration: none; color: var(--text); transition: transform .15s, background .15s; box-shadow: var(--shadow); }
    .link-btn:hover { transform: translateY(-1px); }
    .link-btn.primary { background: linear-gradient(135deg, var(--brandA), var(--brandB)); color: #fff; border-color: transparent; }

    .skeleton { animation: pulse 1.4s ease-in-out infinite; }
    @keyframes pulse { 0%{opacity:.5} 50%{opacity:1} 100%{opacity:.5} }
    .sk-card { height: 260px; border-radius: var(--radius); background: color-mix(in srgb, var(--card) 85%, transparent); border: 1px solid var(--border); box-shadow: var(--shadow); }

    footer { max-width: 1120px; margin: 0 auto 32px; padding: 0 20px; color: var(--muted); text-align: center; }
  </style>
</head>
<body>
  <header class="nav">
    <div class="nav-inner">
      <div class="brand">
        <span class="logo"><i class="fas fa-bolt"></i></span>
        <span>Jonathan&nbsp;Bilewicz</span>
      </div>
      <div style="justify-self:center; font-weight:700;">Projects</div>
      <div class="nav-actions">
        <a class="icon-btn" href="https://github.com/jonb4323" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
        <a class="icon-btn" href="https://www.linkedin.com/in/jonathan-bilewicz-655308293" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
        <button id="themeToggle" class="icon-btn" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
      </div>
    </div>
  </header>

  <section class="hero">
    <div>
      <h1>Building clean, fast experiences</h1>
      <p>Computer Science student based in Toronto, Canada. Below are live tiles pulled from my public GitHub repositories.</p>
      <div class="meta">
        <span class="pill"><i class="fas fa-location-dot" style="margin-right:8px"></i>Toronto, CA</span>
        <span class="pill"><i class="fas fa-code" style="margin-right:8px"></i>Open source & learning</span>
        <a class="btn btn-primary" href="https://www.linkedin.com/in/jonathan-bilewicz-655308293">Contact me</a>
      </div>
    </div>
    <div class="avatar"><img id="githubAvatar" alt="Jonathan Bilewicz" /></div>
  </section>

  <section class="controls">
    <div class="search">
      <i class="fas fa-magnifying-glass"></i>
      <input id="searchInput" type="search" placeholder="Search projects by name, language, or topic…" autocomplete="off" />
    </div>
    <select id="sortSelect" class="sort-select" aria-label="Sort projects">
      <option value="featured">Sort: Featured</option>
      <option value="stars">Sort: Most stars</option>
      <option value="updated">Sort: Recently updated</option>
      <option value="alpha">Sort: A → Z</option>
    </select>
  </section>

  <main class="grid" id="grid">
    <div class="sk-card skeleton"></div>
    <div class="sk-card skeleton"></div>
    <div class="sk-card skeleton"></div>
    <div class="sk-card skeleton"></div>
    <div class="sk-card skeleton"></div>
    <div class="sk-card skeleton"></div>
  </main>

  <footer>
    <small>Data sourced from the GitHub API · Indigo & Tangerine · Showing <strong>manually pinned</strong> repositories.</small>
  </footer>

  <script>
    const GH_USER = 'jonb4323';
    const grid = document.getElementById('grid');
    const searchInput = document.getElementById('searchInput');
    const sortSelect = document.getElementById('sortSelect');
    const themeToggle = document.getElementById('themeToggle');

    // Theme persistence
    const getPrefTheme = () => localStorage.getItem('theme');
    const setPrefTheme = (val) => localStorage.setItem('theme', val);
    const applyTheme = (val) => {
      if (val === 'dark') document.documentElement.style.colorScheme = 'dark';
      else if (val === 'light') document.documentElement.style.colorScheme = 'light';
      else document.documentElement.style.colorScheme = 'light dark';
      themeToggle.innerHTML = (document.documentElement.style.colorScheme.includes('dark')) ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    };
    applyTheme(getPrefTheme());
    themeToggle.addEventListener('click', () => {
      const current = getPrefTheme();
      const next = current === 'dark' ? 'light' : 'dark';
      setPrefTheme(next); applyTheme(next);
    });

    // Load GitHub avatar (always your current profile pic)
    async function loadGitHubAvatar() {
      try {
        const res = await fetch(`https://api.github.com/users/${GH_USER}`);
        if (!res.ok) throw new Error('GitHub user fetch failed');
        const data = await res.json();
        const avatar = document.getElementById('githubAvatar');
        const sep = data.avatar_url.includes('?') ? '&' : '?';
        avatar.src = data.avatar_url;
        avatar.alt = data.name || 'GitHub avatar';
      } catch (e) {
        document.getElementById('githubAvatar').src = 'https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png';
      }
    }

    // Fetch only PINNED repositories
    async function fetchRepos() {
      // Manually pinned list provided by you
      const PINNED = [
        { name: 'CNN-Adversarial-MRI-Tumor-Classifier', fallbackDesc: 'CNN to classify brain MRI scans; evaluates robustness with adversarial attacks.' },
        { name: 'BrainTumor-Detector', fallbackDesc: 'ML model on 3,700+ brain tumor images using simple algorithms; >88% accuracy.' },
        { name: 'JonsAutoClicker', fallbackDesc: 'Auto clicker with clean functional GUI and many features.' },
        { name: 'Website-Automation-Testing', fallbackDesc: 'Automated UI test suite for login using Selenium WebDriver and Pytest.' },
        { name: 'Automotive-Data-Analysis', fallbackDesc: 'Excel-based EV sales dashboard with regional distribution and insights.' }
      ];

      const results = await Promise.all(PINNED.map(async (p) => {
        try {
          const rres = await fetch(`https://api.github.com/repos/${GH_USER}/${p.name}`, { headers: { 'Accept': 'application/vnd.github+json' } });
          if (!rres.ok) throw new Error('Repo details failed');
          const r = await rres.json();
          return {
            id: r.id,
            name: r.name,
            html_url: r.html_url,
            homepage: r.homepage,
            description: r.description || p.fallbackDesc || '',
            language: r.language || '',
            stargazers_count: r.stargazers_count || 0,
            forks_count: r.forks_count || 0,
            updated_at: r.updated_at || '',
            pushed_at: r.pushed_at || '',
            topics: r.topics || [],
            default_branch: r.default_branch || 'main'
          };
        } catch (e) {
          // Fallback if repo fetch fails (still render a card linking to expected URL)
          return {
            id: p.name,
            name: p.name,
            html_url: `https://github.com/${GH_USER}/${p.name}`,
            homepage: `https://github.com/${GH_USER}/${p.name}`,
            description: p.fallbackDesc || '',
            language: '',
            stargazers_count: 0,
            forks_count: 0,
            updated_at: '',
            pushed_at: '',
            topics: [],
            default_branch: 'main'
          };
        }
      }));

      return results;
    }

    const state = { repos: [], filtered: [] };

    function formatDate(iso) {
      try { return new Intl.DateTimeFormat(undefined, { dateStyle: 'medium' }).format(new Date(iso)); }
      catch { return iso; }
    }

    function repoScore(r) {
      const stars = r.stargazers_count || 0;
      const freshDays = Math.max(1, (Date.now() - new Date(r.pushed_at).getTime()) / 86400000);
      const recencyBoost = 200 / freshDays;
      const homepageBoost = r.homepage ? 20 : 0;
      const descBoost = r.description ? 5 : 0;
      return stars * 2 + recencyBoost + homepageBoost + descBoost;
    }

    function sortRepos(list, mode) {
      const arr = [...list];
      if (mode === 'stars') arr.sort((a,b) => (b.stargazers_count||0) - (a.stargazers_count||0));
      else if (mode === 'updated') arr.sort((a,b) => new Date(b.updated_at) - new Date(a.updated_at));
      else if (mode === 'alpha') arr.sort((a,b) => a.name.localeCompare(b.name));
      else arr.sort((a,b) => repoScore(b) - repoScore(a));
      return arr;
    }

    function matchesQuery(r, q) {
      if (!q) return true;
      q = q.toLowerCase();
      return (
        r.name.toLowerCase().includes(q) ||
        (r.description && r.description.toLowerCase().includes(q)) ||
        (r.language && r.language.toLowerCase().includes(q)) ||
        (r.topics && r.topics.some(t => t.toLowerCase().includes(q)))
      );
    }

    function clearGrid() { grid.innerHTML = ''; }

    function renderSkeletons(count = 6) {
      clearGrid();
      for (let i=0; i<count; i++) {
        const el = document.createElement('div');
        el.className = 'sk-card skeleton';
        grid.appendChild(el);
      }
    }

    function render(list) {
      clearGrid();
      if (!list.length) {
        const empty = document.createElement('div');
        empty.className = 'card';
        empty.innerHTML = `<div class="body">
          <div class="title" style="font-size:18px">No pinned repositories found</div>
          <p class="desc">I’m set to show a manual list of repos. If nothing renders, double‑check the names or tell me new ones to include.</p>
          <div class="actions">
            <a class="link-btn" href="https://github.com/${GH_USER}?tab=repositories" target="_blank" rel="noreferrer"><i class="fab fa-github"></i> Open your repositories</a>
          </div>`;
        grid.appendChild(empty);
        return;
      }

      for (const r of list) {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb" aria-hidden="true"></div>
          <div class="body">
            <div class="title-row">
              <div class="title">${r.name}</div>
              <div title="Stars" aria-label="Stars"><i class="fa-regular fa-star"></i> ${r.stargazers_count || 0}</div>
            </div>
            <p class="desc">${r.description ? r.description.replace(/</g,'&lt;') : 'No description yet.'}</p>
            <div class="tags">
              ${r.language ? `<span class="tag">${r.language}</span>` : ''}
              ${Array.isArray(r.topics) ? r.topics.slice(0,3).map(t => `<span class="tag">${t}</span>`).join('') : ''}
            </div>
            <div class="meta-row">
              <span><i class="fa-regular fa-clock"></i> Updated ${formatDate(r.updated_at)}</span>
              <span><i class="fa-solid fa-code-branch"></i> ${r.default_branch}</span>
            </div>
            <div class="actions">
              <a class="link-btn primary" href="${r.html_url}" target="_blank" rel="noreferrer"><i class="fab fa-github"></i> View Repo</a>
              <a class="link-btn" href="${r.homepage || r.html_url}" target="_blank" rel="noreferrer"><i class="fa-solid fa-up-right-from-square"></i> ${r.homepage ? 'Live / Docs' : 'Open'}</a>
            </div>
          </div>
        `;
        grid.appendChild(card);
      }
    }

    function applyFilters() {
      const q = searchInput.value.trim();
      const mode = sortSelect.value;
      const list = state.repos.filter(r => matchesQuery(r, q));
      state.filtered = sortRepos(list, mode);
      render(state.filtered);
    }

    function debounce(fn, ms=180){ let t; return (...args)=>{ clearTimeout(t); t=setTimeout(()=>fn(...args), ms); }; }

    async function init() {
      try {
        renderSkeletons();
        await loadGitHubAvatar();
        state.repos = await fetchRepos();
        applyFilters();
      } catch (err) {
        clearGrid();
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `<div class="body"><div class="title" style="font-size:18px">Could not load projects</div><p class="desc">${String(err).replace(/</g,'&lt;')}</p><div><a class="link-btn" href="https://github.com/${GH_USER}?tab=repositories" target="_blank" rel="noreferrer">Open GitHub Repositories</a></div></div>`;
        grid.appendChild(card);
      }
    }

    searchInput.addEventListener('input', debounce(applyFilters, 120));
    sortSelect.addEventListener('change', applyFilters);

    init();
  </script>
</body>
</html>
